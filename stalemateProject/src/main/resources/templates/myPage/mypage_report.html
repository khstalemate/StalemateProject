<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>마이페이지 - MatE</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/common.css">
    <script>window.FontAwesomeConfig = { autoReplaceSvg: "nest"};</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
    <th:block th:replace="~{common/header}"></th:block>

    <main class="page">
        <div class="mypage-layout">
            
            <th:block th:replace="~{myPage/aside}"></th:block>

            <section class="info-section">
                <h2 class="info-title">신고글 관리</h2>

                <div class="info-item">
                    <div class="report-list-panel">
                        <div class="report-list-head">
                            <div>번호</div>
                            <div>구분</div>
                            <div>제목</div>
                            <div>신고자</div>
                            <div>신고사유</div></divL>
                            <div>신고일</div>
                        </div>
        
                        <th:block th:if="${#lists.isEmpty(reportList)}">
                            <div>게시글이 존재하지 않습니다.</div>
                        </th:block>

                        <th:block th:unless="${#lists.isEmpty(reportList)}">
                            <div th:each="report, iter : ${reportList}" th:object="${report}" class="report-list-row">
                                <div th:text="${pagination.listCount - ((pagination.currentPage - 1) * pagination.limit) - iter.index}" class="report-list-meta">1</div>
                                <div>
                                    <div>
                                        <div th:switch="*{category}">
                                            <span th:case="'분양'" class="badge badge-secondary">분양</span>
                                            <span th:case="'입양'" class="badge badge-primary">입양</span>
                                            <span th:case="'실종'" class="badge badge-primary">실종</span>
                                            <span th:case="'목격'" class="badge badge-secondary">목격</span>
                                        </div>
                                    </div>
                                    
                                </div>
                                <div>   
									<h3 th:text="*{postTitle}"
									    class="report-list-title"
									    th:onclick="|location.href='@{${category == '분양' or category == '입양' 
									        ? '/adoption/{postNo}' 
									        : '/lostandfound/{postNo}'}(postNo=*{postNo})}'|">

                                    </h3>
                                    <p th:text="*{content}" class="report-list-desc character-limit" data-limit="30">내용</p>
                                </div>
                                <div th:text="*{reporterName}" class="report-list-meta">신고자</div>
                                <div th:text="*{reportReason}" class="report-list-meta">신고사유</div>
                                <div th:text="*{reportDate}" class="report-list-meta">2024.03.15</div>
                            </div>
                        </th:block>

                        <div class="pagination" th:object="${pagination}">
                            <button class="page-btn" th:onclick="|location.href='@{/myPage/report(cp=*{prevPage})}'|">
                                <i class="fa-solid fa-chevron-left"></i>
                            </button>
                            <th:block th:each="i : ${#numbers.sequence(pagination.startPage, pagination.endPage)}">
                                <button th:if="${i} == *{currentPage}" class="page-btn active" th:text="${i}">1</button>
                                <button th:unless="${i} == *{currentPage}" th:onclick="|location.href='@{/myPage/report(cp=${i})}'|" th:text="${i}" class="page-btn">2</button>
                            </th:block>
                            <th:block th:unless="*{startPage lt endPage}">
                                <a class="current">1</a>
                            </th:block>
                            <button class="page-btn" th:onclick="|location.href='@{/myPage/report(cp=*{nextPage})}'|">
                                <i class="fa-solid fa-chevron-right"></i>
                            </button>
                        </div>
                        
                    </div>
                </div>
            </section>
        </div>
    </main>

    <th:block th:replace="~{common/footer}"></th:block>

    <script th:if="${message}" th:inline="javascript">
        alert(/*[[${message}]]*/"");
    </script>
</body>
</html>

