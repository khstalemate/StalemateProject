<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>실종,목격 게시판</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/common.css">
    <link rel="stylesheet" href="/css/board/lostandfound.css">
    <script> window.FontAwesomeConfig = { autoReplaceSvg: "nest"};</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
    <th:block th:replace="~{common/header}"></th:block>

    <main class="page">
        <section class="section-card">
            <div class="section-head">
                <div>
                    <h1 class="title-lg">실종&목격 게시판</h1>
                    <p class="subtext">가족같은 반려동물과의 재회를 기원합니다</p>
                </div>
                <div class="controls">
                    <div class="search">
                        <i class="fa-solid fa-search"></i>
                        <input type="text" class="input" placeholder="제목, 내용으로 검색" readonly>
                    </div>
                    <button class="btn btn-primary" id="insertBtn" th:onclick="|location.href='@{/lostandfound/lostandfound_edit}'|">
                        <i class="fa-solid fa-plus"></i> 글쓰기
                    </button>
                </div>
            </div>

            <div class="popup-overlay popup-hidden"></div>
            <form class="popup popup-hidden" method="get">
            <!-- 제목, 내용으로 검색 input창을 눌렀을 때 생성되는 팝업 레이어 -->
            <div class="popup-overlay popup-hidden"></div>

            <div class="popup popup-hidden">
                <div class="popup-row setting">
                    <label>검색 조건 설정</label>
                    <label id="popup-close">&times;</label>
                </div>
                <div class="popup-row">
                    <div class="popup-row-item">
                        <label>제목</label>
                        <input type="text" name="title" class="popup-input" placeholder="제목">
                        <input type="text" class="popup-input" placeholder="제목">
                    </div>
                </div>
                <div class="popup-row">
                    <div class="popup-row-item">
                        <label>작성자</label>
                        <input type="text" name="writer" class="popup-input" placeholder="작성자">
                        <input type="text" class="popup-input" placeholder="작성자">
                    </div>
                </div>
                <div class="popup-row">
                    <div class="popup-row-item">
                        <label>구분</label>
                        <select name="category" class="popup-select">
                            <option value="">전체</option>
                            <option value="missing">실종</option>
                            <option value="witness">목격</option>
                        <select class="popup-select">
                            <option>실종</option>
                            <option>목격</option>
                        </select>
                    </div>
                    <div class="popup-row-item">
                        <label>상태</label>
                        <select name="status" class="popup-select">
                            <option value="">전체</option>
                            <option value="NOT_START">미해결</option>
                            <option value="IN_PROGRESS">진행중</option>
                            <option value="COMPLETE">완료</option>
                        <select class="popup-select">
                            <option>미해결</option>
                            <option>진행중</option>
                            <option>완료</option>
                        </select>
                    </div>
                </div>  
                <div class="popup-row">
                    <div class="popup-row-item">
                        <label>동물 정보</label>
                        <select name="species" class="popup-select">
                            <option value="">전체</option>
                            <option value="dog">개</option>
                            <option value="cat">고양이</option>
                            <option value="etc">기타</option>
                        <select class="popup-select">
                            <option>개</option>
                            <option>고양이</option>
                            <option>기타</option>
                        </select>
                    </div>
                    
                    <div class="popup-row-item">
                        <label>성별</label>
                        <select name="gender" class="popup-select">
                            <option value="">전체</option>
                            <option value="M">수컷</option>
                            <option value="F">암컷</option>
                            <option value="neutering">중성화</option>
                            <option value="unknown">기타</option>
                        <select class="popup-select">
                            <option>수컷</option>
                            <option>암컷</option>
                            <option>중성화</option>
                            <option>기타</option>
                        </select>
                    </div>
                </div>
                <div class="popup-row">
                    <div class="popup-row-item">
                        <label>나이</label>
                        <select name="age" class="popup-select">
                            <option value="">전체</option>
                            <option value="0">알 수 없음</option>
                            <option value="1">0~3개월</option>
                            <option value="2">4~6개월</option>
                            <option value="3">7~12개월(1살)</option>
                            <option value="4">13~18개월</option>
                            <option value="5">19~24개월(2살)</option>
                            <option value="6">2살~3살</option>
                            <option value="7">3살~4살</option>
                            <option value="8">4살~5살</option>
                            <option value="9">5살~6살</option>
                            <option value="10">6살~7살</option>
                            <option value="11">7살~8살</option>
                            <option value="12">8살 이상</option>
                        <select class="popup-select">
                            <option>알 수 없음</option>
                            <option>0~3개월</option>
                            <option>4~6개월</option>
                            <option>7~12개월(1살)</option>
                            <option>13~18개월</option>
                            <option>19~24개월(2살)</option>
                            <option>2살~3살</option>
                            <option>3살~4살</option>
                            <option>4살~5살</option>
                            <option>5살~6살</option>
                            <option>6살~7살</option>
                            <option>7살~8살</option>
                            <option>8살 이상</option>
                        </select>   
                    </div>
                    <div class="popup-row-item">
                        <label>체중</label>
                        <select name="weight" class="popup-select">
                            <option value="">전체</option>
                            <option value="0">알 수 없음</option>
                            <option value="1">초소형(3kg 미만)</option>
                            <option value="2">소형(3~8kg)</option>
                            <option value="3">중형(8~15kg)</option>
                            <option value="4">대형(25~40kg)</option>
                            <option value="5">초대형(40kg 초과)</option>
                        <select class="popup-select">
                            <option>알 수 없음</option>
                            <option>초소형(3kg 미만)</option>
                            <option>소형(3~8kg)</option>
                            <option>중형(8~15kg)</option>
                            <option>대형(25~40kg)</option>
                            <option>초대형(40kg 미만)</option>
                        </select>
                    </div>
                </div>
                <div class="popup-row">
                    <button>검색하기</button>
                </div>
            </form>  
            </div>  

            <div class="stat-grid">
                <div class="stat-card">
                    <div>   
                        <p class="stat-label">총 게시글</p>
                        <p class="stat-value" id="allPostCount"></p>
                    </div>
                    <div class="stat-icon"><i class="fa-solid fa-list"></i></div>
                </div>
                <div class="stat-card">
                    <div>
                        <p class="stat-label">실종</p>
                        <p class="stat-value stat-value-primary" id="lostPostCount"></p>
                    </div>
                    <div class="stat-icon stat-icon-primary"><i class="fa-solid fa-search"></i></div>
                </div>
                <div class="stat-card">
                    <div>
                        <p class="stat-label">목격</p>
                        <p class="stat-value stat-value-secondary" id="witnessPostCount"></p>
                    </div>
                    <div class="stat-icon stat-icon-secondary"><i class="fa-solid fa-eye"></i></div>
                </div>
                <div class="stat-card">
                    <div>
                        <p class="stat-label">오늘 등록</p>
                        <p class="stat-value stat-value-green" id="todayPostCount"></p>
                    </div>
                    <div class="stat-icon stat-icon-green"><i class="fa-solid fa-plus"></i></div>
                </div>
            </div>

            <div class="list-panel" id="missing-board">
                <div class="list-head">
                    <div>번호</div>
                    <div>구분</div>
                    <div>제목</div>
                    <div>작성자</div>
                    <div>작성일</div>
                    <div>조회</div>
                    <div>상태</div>
                </div>

                <th:block th:if="${#lists.isEmpty(postList)}">
                    <div class="no-result">게시글이 존재하지 않습니다.</div>
                </th:block>

                <th:block th:unless="${#lists.isEmpty(postList)}">
                    <div th:each="post, iter : ${postList}" th:object="${post}" class="list-row">
                        <div th:text="${pagination.listCount - ((pagination.currentPage - 1) * pagination.limit) - iter.index}" class="list-meta">1</div>
                        <div><span th:text="*{category == '실종'} ? '실종' : '목격'" class="badge"
                                th:classappend="*{category == '실종'} ? 'badge-primary' : 'badge-secondary'">실종</span></div>
                        <div>   
                            <h3 th:text="*{postTitle}" class="list-title character-limit" data-limit="20" id="post_title"
                                th:onclick="|location.href='@{/lostandfound/detail(postNo=*{postNo})}'|">제목</h3>
                            <p th:text="*{content}" class="list-desc character-limit" data-limit="30">내용</p>
                        </div>
                        <div th:text="*{memberName}" class="list-meta">작성자</div>
                        <div th:text="*{postDate}" class="list-meta">2024.03.15</div>
                        <div th:text="*{views}" class="list-meta"></div>
                        <div th:switch="*{status}">
                            <span th:case="'NOT_START'" class="badge badge-primary">미해결</span>
                            <span th:case="'IN_PROGRESS'" class="badge badge-green">진행중</span>
                            <span th:case="'COMPLETE'" class="badge badge-dark">완료</span>
                        </div>
                    </div>

                    <div class="pagination" th:if="${pagination != null and pagination.maxPage > 1}">
                        <th:block th:object="${pagination}">
                            
                            <button type="button" class="page-btn" th:if="*{currentPage > 1}"
                                    th:onclick="|location.href='@{/lostandfound/(cp=*{prevPage}, title=${param.title}, writer=${param.writer}, category=${param.category}, status=${param.status}, species=${param.species}, gender=${param.gender}, age=${param.age}, weight=${param.weight})}'|">
                                <i class="fa-solid fa-chevron-left"></i>
                            </button>

                            <th:block th:each="i : ${#numbers.sequence(pagination.startPage, pagination.endPage)}">
                                <button type="button" th:if="${i} == *{currentPage}" class="page-btn active" th:text="${i}">1</button>
                                
                                <button type="button" th:unless="${i} == *{currentPage}" class="page-btn"
                                        th:onclick="|location.href='@{/lostandfound/(cp=${i}, title=${param.title}, writer=${param.writer}, category=${param.category}, status=${param.status}, species=${param.species}, gender=${param.gender}, age=${param.age}, weight=${param.weight})}'|"
                                        th:text="${i}">2</button>
                            </th:block>

                            <button type="button" class="page-btn" th:if="*{currentPage < maxPage}"
                                    th:onclick="|location.href='@{/lostandfound/(cp=*{nextPage}, title=${param.title}, writer=${param.writer}, category=${param.category}, status=${param.status}, species=${param.species}, gender=${param.gender}, age=${param.age}, weight=${param.weight})}'|">
                                <i class="fa-solid fa-chevron-right"></i>
                            </button>
                        </th:block>
                    </div>
                </th:block>
        </section>
    </main>

    <th:block th:replace="~{common/footer}" class="footer"></th:block>

    <script src="/js/board/lostandfound.js"></script>
</body>
</html>