<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.stale.mate.main.mapper.MainMapper">

	<select id="selectLostandfoundList" resultType="Post">
  		SELECT *
  			FROM (
    			SELECT
        		P.POST_NO,
        		P.POST_TITLE,
				P.LOCATION,
				P.MISSING_DATE,
        		P.MISSING_TIME,
        		P.CATEGORY,
        	   (
            	SELECT I.IMG_PATH
            	FROM POST_IMG I
           		WHERE I.POST_NO = P.POST_NO
             	ORDER BY I.IMG_NO ASC
            	FETCH FIRST 1 ROWS ONLY
        	   ) AS thumbnail
    	FROM POST P
    	WHERE P.CATEGORY IN ('실종', '목격')
    	ORDER BY P.POST_NO DESC
  				)
		WHERE ROWNUM <![CDATA[<=]]> 4
	</select>

</mapper>