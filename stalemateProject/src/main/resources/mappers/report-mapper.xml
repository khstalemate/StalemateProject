<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.stale.mate.board.model.mapper.ReportMapper">
	<!-- 작성자 : 최보윤
	작성일자 : 2025-01-05
	신고글 삽입 -->
	<insert id="insertReport" parameterType="com.stale.mate.myPage.model.dto.Report">
        <selectKey order="BEFORE" resultType="_int" keyProperty="reportNo">
            SELECT SEQ_REPORT.NEXTVAL FROM DUAL
        </selectKey>

        INSERT INTO REPORT (REPORT_NO, AUTHOR_ID, AUTHOR_NAME, REPORT_REASON, REPORT_DATE, POST_NO, MEMBER_NO)
            VALUES (
            SEQ_REPORT.NEXTVAL,
            (SELECT MEMBER_ID FROM POST JOIN MEMBER USING(MEMBER_NO) WHERE POST_NO = #{postNo}),
            #{authorName},
            #{reportReason},
            SYSTIMESTAMP,
            #{postNo},
            #{memberNo}
        )
    </insert>
</mapper>